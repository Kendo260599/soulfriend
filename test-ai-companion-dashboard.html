<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test AI Companion Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-button {
            background: #d63384;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #c02a5c;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>ü§ñ Test AI Companion Dashboard</h1>
    <p>Ki·ªÉm tra AI Companion Dashboard c√≥ hi·ªÉn th·ªã d·ªØ li·ªáu c√° nh√¢n h√≥a t·ª´ test results kh√¥ng</p>
    
    <div class="test-container">
        <h2>üß™ Test Cases</h2>
        
        <div class="test-section">
            <h3>1. Ki·ªÉm tra d·ªØ li·ªáu test results</h3>
            <button class="test-button" onclick="checkTestResults()">Ki·ªÉm tra Test Results</button>
            <div id="test-results-result" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>2. T·∫°o AI Profile t·ª´ test results</h3>
            <button class="test-button" onclick="createAIProfile()">T·∫°o AI Profile</button>
            <div id="ai-profile-result" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>3. T·∫°o AI Insights</h3>
            <button class="test-button" onclick="generateInsights()">T·∫°o AI Insights</button>
            <div id="ai-insights-result" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>4. T·∫°o AI Interventions</h3>
            <button class="test-button" onclick="generateInterventions()">T·∫°o AI Interventions</button>
            <div id="ai-interventions-result" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>5. Ki·ªÉm tra Dashboard Data</h3>
            <button class="test-button" onclick="checkDashboardData()">Ki·ªÉm tra Dashboard Data</button>
            <div id="dashboard-data-result" class="result"></div>
        </div>
        
        <div class="test-section">
            <h3>6. X√≥a d·ªØ li·ªáu c≈© v√† t·∫°o m·ªõi</h3>
            <button class="test-button" onclick="clearAndRegenerate()">X√≥a v√† T·∫°o M·ªõi</button>
            <div id="clear-result" class="result"></div>
        </div>
    </div>

    <script>
        // Mock test results for testing
        const mockTestResults = [
            {
                testType: 'DASS_21',
                totalScore: 15,
                maxScore: 63,
                evaluation: { level: 'Trung b√¨nh', description: 'M·ª©c ƒë·ªô lo √¢u v√† stress ·ªü m·ª©c trung b√¨nh' }
            },
            {
                testType: 'PHQ_9',
                totalScore: 8,
                maxScore: 27,
                evaluation: { level: 'Nh·∫π', description: 'Tri·ªáu ch·ª©ng tr·∫ßm c·∫£m nh·∫π' }
            },
            {
                testType: 'ROSENBERG_SELF_ESTEEM',
                totalScore: 25,
                maxScore: 40,
                evaluation: { level: 'Cao', description: 'L√≤ng t·ª± tr·ªçng cao' }
            }
        ];

        function checkTestResults() {
            const resultDiv = document.getElementById('test-results-result');
            resultDiv.className = 'result info';
            resultDiv.textContent = `Test Results trong localStorage:\n${JSON.stringify(mockTestResults, null, 2)}`;
        }

        function createAIProfile() {
            const resultDiv = document.getElementById('ai-profile-result');
            
            try {
                // Simulate AI profile creation
                const profile = {
                    userId: 'user_001',
                    personalityType: 'introvert',
                    stressPatterns: ['Lo √¢u v·ª´a ph·∫£i', 'CƒÉng th·∫≥ng c√¥ng vi·ªác'],
                    copingStrategies: ['Thi·ªÅn ƒë·ªãnh', 'T·∫≠p th·ªÉ d·ª•c', 'Vi·∫øt nh·∫≠t k√Ω'],
                    culturalContext: 'vietnamese',
                    lifeStage: 'professional',
                    preferences: {
                        communicationStyle: 'gentle',
                        interventionLevel: 'moderate',
                        privacyLevel: 'high'
                    },
                    riskFactors: ['Lo √¢u k√©o d√†i', '√Åp l·ª±c c√¥ng vi·ªác'],
                    protectiveFactors: ['L√≤ng t·ª± tr·ªçng cao', 'H·ªó tr·ª£ x√£ h·ªôi'],
                    lastInteraction: new Date(),
                    trustLevel: 50
                };
                
                // Save to localStorage
                localStorage.setItem('ai_companion_profiles', JSON.stringify({ 'user_001': profile }));
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `‚úÖ AI Profile created and saved:\n${JSON.stringify(profile, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function generateInsights() {
            const resultDiv = document.getElementById('ai-insights-result');
            
            try {
                const insights = [
                    {
                        id: 'personality_001',
                        type: 'pattern',
                        title: 'Ph√¢n t√≠ch t√≠nh c√°ch: H∆∞·ªõng n·ªôi s√¢u s·∫Øc',
                        description: 'B·∫°n c√≥ xu h∆∞·ªõng h∆∞·ªõng n·ªôi, th√≠ch kh√¥ng gian y√™n tƒ©nh v√† suy nghƒ© s√¢u s·∫Øc. ƒê√¢y l√† ƒëi·ªÉm m·∫°nh gi√∫p b·∫°n c√≥ kh·∫£ nƒÉng t·ª± ph·∫£n √°nh v√† ph√°t tri·ªÉn n·ªôi t√¢m.',
                        confidence: 85,
                        actionItems: [
                            'T·∫°o kh√¥ng gian y√™n tƒ©nh cho b·∫£n th√¢n',
                            'Th·ª±c h√†nh journaling ƒë·ªÉ kh√°m ph√° n·ªôi t√¢m',
                            'Tham gia c√°c nh√≥m nh·ªè thay v√¨ ƒë√°m ƒë√¥ng l·ªõn'
                        ],
                        timeframe: 'long_term',
                        priority: 'medium',
                        evidence: ['T√≠nh c√°ch: introvert', 'Giai ƒëo·∫°n: professional'],
                        culturalRelevance: 95
                    },
                    {
                        id: 'stress_001',
                        type: 'pattern',
                        title: 'M·∫´u cƒÉng th·∫≥ng: √Åp l·ª±c c√¥ng vi·ªác',
                        description: 'B·∫°n ƒëang tr·∫£i qua cƒÉng th·∫≥ng t·ª´ √°p l·ª±c c√¥ng vi·ªác. ƒêi·ªÅu n√†y c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn s·ª©c kh·ªèe t√¢m l√Ω v√† th·ªÉ ch·∫•t.',
                        confidence: 80,
                        actionItems: [
                            'Th·ª±c h√†nh k·ªπ thu·∫≠t th·ªü 4-7-8',
                            'T·∫°o ranh gi·ªõi r√µ r√†ng gi·ªØa c√¥ng vi·ªác v√† cu·ªôc s·ªëng',
                            'T√¨m ki·∫øm h·ªó tr·ª£ t·ª´ ƒë·ªìng nghi·ªáp ho·∫∑c c·∫•p tr√™n'
                        ],
                        timeframe: 'short_term',
                        priority: 'high',
                        evidence: ['Lo √¢u v·ª´a ph·∫£i', 'CƒÉng th·∫≥ng c√¥ng vi·ªác'],
                        culturalRelevance: 90
                    }
                ];
                
                // Save to localStorage
                localStorage.setItem('ai_companion_insights', JSON.stringify({ 'user_001': insights }));
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `‚úÖ AI Insights generated and saved:\n${JSON.stringify(insights, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function generateInterventions() {
            const resultDiv = document.getElementById('ai-interventions-result');
            
            try {
                const interventions = [
                    {
                        id: 'breathing_001',
                        type: 'behavioral',
                        method: 'breathing',
                        title: 'K·ªπ thu·∫≠t th·ªü 4-7-8',
                        description: 'Th·ªü s√¢u 4 gi√¢y, gi·ªØ 7 gi√¢y, th·ªü ra 8 gi√¢y. L·∫∑p l·∫°i 4 l·∫ßn.',
                        duration: 5,
                        difficulty: 'beginner',
                        effectiveness: 85,
                        culturalAdaptation: 'Ph√π h·ª£p v·ªõi vƒÉn h√≥a Vi·ªát Nam, c√≥ th·ªÉ th·ª±c h√†nh m·ªçi l√∫c',
                        personalizedTips: [
                            'Th·ª±c h√†nh khi c·∫£m th·∫•y lo l·∫Øng',
                            'K·∫øt h·ª£p v·ªõi thi·ªÅn ƒë·ªãnh',
                            'T·∫°o th√≥i quen h√†ng ng√†y'
                        ]
                    },
                    {
                        id: 'journaling_001',
                        type: 'cognitive',
                        method: 'journaling',
                        title: 'Vi·∫øt nh·∫≠t k√Ω c·∫£m x√∫c',
                        description: 'Vi·∫øt v·ªÅ c·∫£m x√∫c v√† suy nghƒ© h√†ng ng√†y ƒë·ªÉ hi·ªÉu r√µ b·∫£n th√¢n h∆°n.',
                        duration: 15,
                        difficulty: 'beginner',
                        effectiveness: 75,
                        culturalAdaptation: 'Ph√π h·ª£p v·ªõi vƒÉn h√≥a Vi·ªát Nam, c√≥ th·ªÉ vi·∫øt b·∫±ng ti·∫øng Vi·ªát',
                        personalizedTips: [
                            'Vi·∫øt v√†o bu·ªïi t·ªëi tr∆∞·ªõc khi ng·ªß',
                            'Kh√¥ng c·∫ßn vi·∫øt d√†i, ch·ªâ c·∫ßn ghi l·∫°i c·∫£m x√∫c',
                            'ƒê·ªçc l·∫°i sau 1 tu·∫ßn ƒë·ªÉ th·∫•y s·ª± thay ƒë·ªïi'
                        ]
                    }
                ];
                
                // Save to localStorage
                localStorage.setItem('ai_companion_interventions', JSON.stringify({ 'user_001': interventions }));
                
                resultDiv.className = 'result success';
                resultDiv.textContent = `‚úÖ AI Interventions generated and saved:\n${JSON.stringify(interventions, null, 2)}`;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function checkDashboardData() {
            const resultDiv = document.getElementById('dashboard-data-result');
            
            try {
                const profiles = localStorage.getItem('ai_companion_profiles');
                const insights = localStorage.getItem('ai_companion_insights');
                const interventions = localStorage.getItem('ai_companion_interventions');
                
                let result = 'üìä Dashboard Data Status:\n\n';
                
                if (profiles) {
                    const profilesData = JSON.parse(profiles);
                    result += `‚úÖ Profiles: ${Object.keys(profilesData).length} profiles\n`;
                    result += `   - User 001: ${profilesData['user_001']?.personalityType || 'Not found'}\n`;
                } else {
                    result += `‚ùå Profiles: No data found\n`;
                }
                
                if (insights) {
                    const insightsData = JSON.parse(insights);
                    result += `‚úÖ Insights: ${Object.keys(insightsData).length} users\n`;
                    result += `   - User 001: ${insightsData['user_001']?.length || 0} insights\n`;
                } else {
                    result += `‚ùå Insights: No data found\n`;
                }
                
                if (interventions) {
                    const interventionsData = JSON.parse(interventions);
                    result += `‚úÖ Interventions: ${Object.keys(interventionsData).length} users\n`;
                    result += `   - User 001: ${interventionsData['user_001']?.length || 0} interventions\n`;
                } else {
                    result += `‚ùå Interventions: No data found\n`;
                }
                
                resultDiv.className = 'result info';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function clearAndRegenerate() {
            const resultDiv = document.getElementById('clear-result');
            
            try {
                // Clear all AI companion data
                localStorage.removeItem('ai_companion_profiles');
                localStorage.removeItem('ai_companion_insights');
                localStorage.removeItem('ai_companion_interventions');
                
                // Regenerate data
                createAIProfile();
                generateInsights();
                generateInterventions();
                
                resultDiv.className = 'result success';
                resultDiv.textContent = '‚úÖ Cleared all AI companion data and regenerated fresh data';
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        // Initialize with mock data
        window.onload = function() {
            console.log('ü§ñ AI Companion Dashboard Test initialized');
            console.log('üìä Mock test results:', mockTestResults);
        };
    </script>
</body>
</html>
