<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Chatbot - Context Aware</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .chat-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 8px;
        }
        .user-message {
            background: #e3f2fd;
            margin-left: 20px;
        }
        .bot-message {
            background: #f3e5f5;
            margin-right: 20px;
        }
        .recommendations {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            padding: 10px;
            margin: 10px 0;
        }
        .crisis-warning {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 10px;
            margin: 10px 0;
        }
        .input-container {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        input[type="text"] {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            background: #d63384;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #c02a5c;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .test-btn {
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }
        .test-btn:hover {
            background: #5a6268;
        }
    </style>
</head>
<body>
    <h1>ü§ñ Test Chatbot - Context Aware</h1>
    <p>Test chatbot v·ªõi kh·∫£ nƒÉng nh·∫≠n bi·∫øt ng·ªØ c·∫£nh - ch·ªâ hi·ªÉn th·ªã khuy·∫øn ngh·ªã khi c·∫ßn thi·∫øt</p>
    
    <div class="test-buttons">
        <button class="test-btn" onclick="testMessage('Bi√™n H√≤a ·ªü ƒë√¢u?')">ƒê·ªãa l√Ω</button>
        <button class="test-btn" onclick="testMessage('H√¥m nay tr·ªùi ƒë·∫πp qu√°')">Th·ªùi ti·∫øt</button>
        <button class="test-btn" onclick="testMessage('T√¥i ƒëang stress v√¨ c√¥ng vi·ªác')">Stress</button>
        <button class="test-btn" onclick="testMessage('Gi·∫£i th√≠ch k·∫øt qu·∫£ test DASS-21')">Test</button>
        <button class="test-btn" onclick="testMessage('Xin ch√†o')">Ch√†o h·ªèi</button>
        <button class="test-btn" onclick="testMessage('T√¥i mu·ªën t·ª± t·ª≠')">Kh·ªßng ho·∫£ng</button>
    </div>
    
    <div class="chat-container">
        <div id="messages"></div>
        <div class="input-container">
            <input type="text" id="user-input" placeholder="Nh·∫≠p c√¢u h·ªèi..." onkeypress="handleKeyPress(event)">
            <button onclick="sendMessage()">G·ª≠i</button>
        </div>
    </div>

    <script>
        function checkMentalHealthKeywords(message) {
            const lowerMessage = message.toLowerCase();
            const mentalHealthKeywords = [
                'stress', 'lo √¢u', 'lo l·∫Øng', 'tr·∫ßm c·∫£m', 'bu·ªìn', 't·ª± tin', 't·ª± tr·ªçng',
                'ch√°nh ni·ªám', 'mindfulness', 'gia ƒë√¨nh', 'm·ªëi quan h·ªá', 'pms', 'kinh nguy·ªát',
                'm√£n kinh', 'menopause', 'chuy√™n gia', 'b√°c sƒ©', 't√¢m l√Ω', 't√¢m th·∫ßn',
                'kh·ªßng ho·∫£ng', 'hotline', 'test', 'k·∫øt qu·∫£', 'ƒëi·ªÉm', 'ƒë√°nh gi√°',
                'c·∫£m x√∫c', 't√¢m tr·∫°ng', 'tinh th·∫ßn', 's·ª©c kh·ªèe', 'h·ªó tr·ª£', 'gi√∫p ƒë·ª°'
            ];
            return mentalHealthKeywords.some(keyword => lowerMessage.includes(keyword));
        }

        function checkCrisisKeywords(message) {
            const lowerMessage = message.toLowerCase();
            const crisisKeywords = [
                't·ª± t·ª≠', 't·ª± s√°t', 'ch·∫øt', 'kh√¥ng mu·ªën s·ªëng', 'b·ªè cu·ªôc',
                'tuy·ªát v·ªçng', 'kh√¥ng c√≤n hy v·ªçng', 'kh·ªßng ho·∫£ng', 'c·∫•p c·ª©u',
                'nguy hi·ªÉm', 't·ª± l√†m h·∫°i', 't·ª± h·ªßy ho·∫°i'
            ];
            return crisisKeywords.some(keyword => lowerMessage.includes(keyword));
        }

        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('bi√™n h√≤a')) {
                return "Bi√™n H√≤a l√† th√†nh ph·ªë thu·ªôc t·ªânh ƒê·ªìng Nai, n·∫±m ·ªü ph√≠a Nam Vi·ªát Nam, c√°ch TP.HCM kho·∫£ng 30km v·ªÅ ph√≠a ƒê√¥ng B·∫Øc. ƒê√¢y l√† m·ªôt th√†nh ph·ªë c√¥ng nghi·ªáp ph√°t tri·ªÉn v·ªõi nhi·ªÅu khu c√¥ng nghi·ªáp l·ªõn.";
            } else if (lowerMessage.includes('tr·ªùi ƒë·∫πp')) {
                return "V√¢ng, h√¥m nay tr·ªùi th·∫≠t ƒë·∫πp! Th·ªùi ti·∫øt t·ªët c√≥ th·ªÉ gi√∫p c·∫£i thi·ªán t√¢m tr·∫°ng v√† t·∫°o c·∫£m gi√°c t√≠ch c·ª±c. B·∫°n c√≥ mu·ªën ra ngo√†i t·∫≠n h∆∞·ªüng kh√¥ng kh√≠ trong l√†nh kh√¥ng?";
            } else if (lowerMessage.includes('stress')) {
                return "T√¥i hi·ªÉu b·∫°n ƒëang g·∫∑p stress. ƒê√¢y l√† m·ªôt ph·∫£n ·ª©ng t·ª± nhi√™n c·ªßa c∆° th·ªÉ khi ƒë·ªëi m·∫∑t v·ªõi √°p l·ª±c. Stress c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn c·∫£ th·ªÉ ch·∫•t v√† tinh th·∫ßn.";
            } else if (lowerMessage.includes('test')) {
                return "T√¥i c√≥ th·ªÉ gi√∫p b·∫°n hi·ªÉu k·∫øt qu·∫£ test t√¢m l√Ω. B·∫°n ƒë√£ l√†m test n√†o v√† ƒëi·ªÉm s·ªë ra sao? T√¥i s·∫Ω gi·∫£i th√≠ch chi ti·∫øt √Ω nghƒ©a c·ªßa k·∫øt qu·∫£ v√† ƒë∆∞a ra g·ª£i √Ω ph√π h·ª£p.";
            } else if (lowerMessage.includes('t·ª± t·ª≠')) {
                return "T√¥i r·∫•t lo l·∫Øng khi nghe b·∫°n n√≥i v·ªÅ vi·ªác t·ª± t·ª≠. ƒê√¢y l√† m·ªôt v·∫•n ƒë·ªÅ nghi√™m tr·ªçng c·∫ßn ƒë∆∞·ª£c quan t√¢m ngay l·∫≠p t·ª©c.";
            } else if (lowerMessage.includes('xin ch√†o') || lowerMessage.includes('hello')) {
                return "Xin ch√†o! T√¥i l√† CHUN - AI Companion h·ªó tr·ª£ s·ª©c kh·ªèe t√¢m l√Ω. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?";
            } else {
                return "Xin ch√†o! T√¥i l√† CHUN - AI Companion h·ªó tr·ª£ s·ª©c kh·ªèe t√¢m l√Ω. T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªõi c√°c v·∫•n ƒë·ªÅ v·ªÅ s·ª©c kh·ªèe t√¢m l√Ω, stress, lo √¢u, ho·∫∑c gi·∫£i th√≠ch k·∫øt qu·∫£ test.";
            }
        }

        function addMessage(sender, text, isRecommendation = false, isCrisis = false) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}-message`;
            
            if (isRecommendation) {
                messageDiv.className += ' recommendations';
                messageDiv.innerHTML = `<strong>üí° Khuy·∫øn ngh·ªã:</strong><br>${text}`;
            } else if (isCrisis) {
                messageDiv.className += ' crisis-warning';
                messageDiv.innerHTML = `<strong>üö® C·∫¢NH B√ÅO:</strong><br>${text}`;
            } else {
                messageDiv.innerHTML = `<strong>${sender === 'user' ? 'B·∫°n' : 'CHUN'}:</strong> ${text}`;
            }
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('user-input');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addMessage('user', message);
            input.value = '';

            // Generate response
            const response = generateResponse(message);
            addMessage('bot', response);

            // Check if should add recommendations
            const isMentalHealth = checkMentalHealthKeywords(message);
            const isCrisis = checkCrisisKeywords(message);

            if (isCrisis) {
                addMessage('bot', 'T√¥i ph√°t hi·ªán d·∫•u hi·ªáu kh·ªßng ho·∫£ng. H√£y t√¨m ki·∫øm s·ª± h·ªó tr·ª£ chuy√™n nghi·ªáp ngay l·∫≠p t·ª©c!', false, true);
                addMessage('bot', 'üìû Li√™n h·ªá kh·∫©n c·∫•p:<br>‚Ä¢ Hotline t∆∞ v·∫•n t√¢m l√Ω: 1900 599 958<br>‚Ä¢ B·ªánh vi·ªán T√¢m th·∫ßn TW: 024 3736 2121<br>‚Ä¢ Trung t√¢m Ph√≤ng ch·ªëng t·ª± t·ª≠: 1900 599 958', false, true);
            } else if (isMentalHealth) {
                addMessage('bot', '1. Th·ª±c h√†nh thi·ªÅn ch√°nh ni·ªám<br>2. T·∫≠p th·ªÉ d·ª•c nh·∫π nh√†ng<br>3. D√†nh th·ªùi gian cho s·ªü th√≠ch<br>4. Duy tr√¨ gi·ªù gi·∫•c sinh ho·∫°t ƒë·ªÅu ƒë·∫∑n<br>5. K·∫øt n·ªëi v·ªõi ng∆∞·ªùi th√¢n, b·∫°n b√®', true);
            }
        }

        function testMessage(message) {
            document.getElementById('user-input').value = message;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Initial message
        addMessage('bot', 'Xin ch√†o! T√¥i l√† CHUN - AI Companion h·ªó tr·ª£ s·ª©c kh·ªèe t√¢m l√Ω. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n h√¥m nay?');
    </script>
</body>
</html>
