<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Detailed Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #d63384;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #c02a5c;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        .detailed-result {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .test-score {
            color: #6c757d;
            font-size: 1rem;
            margin-bottom: 5px;
        }
        .test-level {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 10px;
        }
        .test-level.nh·∫π { color: #28a745; }
        .test-level.trung-b√¨nh { color: #ffc107; }
        .test-level.n·∫∑ng { color: #fd7e14; }
        .test-level.r·∫•t-n·∫∑ng { color: #dc3545; }
        .detailed-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            border-left: 3px solid #667eea;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        .info-label {
            color: #495057;
            font-weight: 500;
        }
        .info-value {
            color: #2c3e50;
            font-weight: 600;
        }
        .recommendation-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            border-left: 3px solid #9c27b0;
        }
        .recommendation-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .recommendation-text {
            color: #495057;
            font-size: 0.9rem;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <h1>üìä Test Detailed Results</h1>
    <p>Ki·ªÉm tra k·∫øt qu·∫£ test chi ti·∫øt v√† phong ph√∫</p>
    
    <div class="test-container">
        <h2>üß™ Test Detailed Results</h2>
        
        <button class="test-button" onclick="testBasicResults()">1. Test Basic Results</button>
        <button class="test-button" onclick="testDetailedResults()">2. Test Detailed Results</button>
        <button class="test-button" onclick="testRecommendations()">3. Test Recommendations</button>
        <button class="test-button" onclick="testCompleteAnalysis()">4. Test Complete Analysis</button>
        
        <div id="result" class="result"></div>
    </div>

    <script>
        // Mock test results for testing
        const mockTestResults = [
            {
                testType: 'DASS_21',
                totalScore: 18,
                maxScore: 63,
                evaluation: { level: 'Trung b√¨nh', description: 'M·ª©c ƒë·ªô stress v√† lo √¢u ·ªü m·ª©c trung b√¨nh' },
                answers: [2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1],
                completedAt: new Date().toISOString()
            },
            {
                testType: 'PHQ_9',
                totalScore: 8,
                maxScore: 27,
                evaluation: { level: 'Nh·∫π', description: 'Tri·ªáu ch·ª©ng tr·∫ßm c·∫£m nh·∫π' },
                answers: [2, 2, 1, 2, 1, 2, 1, 2, 1],
                completedAt: new Date().toISOString()
            },
            {
                testType: 'GAD_7',
                totalScore: 12,
                maxScore: 21,
                evaluation: { level: 'Trung b√¨nh', description: 'M·ª©c ƒë·ªô lo √¢u trung b√¨nh' },
                answers: [2, 2, 1, 2, 1, 2, 2],
                completedAt: new Date().toISOString()
            }
        ];

        function getTestDisplayName(testType) {
            const testNames = {
                'DASS_21': 'DASS-21 (Lo √¢u, Tr·∫ßm c·∫£m, Stress)',
                'PHQ_9': 'PHQ-9 (Tr·∫ßm c·∫£m)',
                'GAD_7': 'GAD-7 (Lo √¢u)',
                'ROSENBERG_SELF_ESTEEM': 'Rosenberg Self-Esteem (L√≤ng t·ª± tr·ªçng)',
                'FAMILY_APGAR': 'Family APGAR (H·ªó tr·ª£ gia ƒë√¨nh)',
                'MENOPAUSE_RATING': 'Menopause Rating Scale (M√£n kinh)',
                'PMS': 'PMS (H·ªôi ch·ª©ng ti·ªÅn kinh nguy·ªát)',
                'PARENTAL_STRESS': 'Parental Stress Scale (Stress l√†m cha m·∫π)',
                'FAMILY_RELATIONSHIP': 'Family Relationship Test (M·ªëi quan h·ªá gia ƒë√¨nh)'
            };
            return testNames[testType] || testType;
        }

        function getRecommendationForTest(testType, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (percentage < 30) return 'K·∫øt qu·∫£ t·ªët! B·∫°n ƒëang qu·∫£n l√Ω stress kh√° hi·ªáu qu·∫£. Ti·∫øp t·ª•c duy tr√¨ l·ªëi s·ªëng l√†nh m·∫°nh.';
                    if (percentage < 60) return 'M·ª©c ƒë·ªô stress trung b√¨nh. H√£y th·ª±c h√†nh k·ªπ thu·∫≠t th·ªü v√† thi·ªÅn ƒë·ªãnh ƒë·ªÉ gi·∫£m stress.';
                    return 'M·ª©c ƒë·ªô stress cao. N√™n t√¨m ki·∫øm h·ªó tr·ª£ chuy√™n nghi·ªáp v√† th·ª±c h√†nh c√°c k·ªπ thu·∫≠t qu·∫£n l√Ω stress.';
                
                case 'PHQ_9':
                    if (percentage < 30) return 'T√¢m tr·∫°ng ·ªïn ƒë·ªãnh. Ti·∫øp t·ª•c duy tr√¨ c√°c ho·∫°t ƒë·ªông t√≠ch c·ª±c v√† k·∫øt n·ªëi x√£ h·ªôi.';
                    if (percentage < 60) return 'C√≥ d·∫•u hi·ªáu tr·∫ßm c·∫£m nh·∫π. H√£y tƒÉng c∆∞·ªùng ho·∫°t ƒë·ªông th·ªÉ ch·∫•t v√† ti·∫øp x√∫c √°nh s√°ng t·ª± nhi√™n.';
                    return 'Tri·ªáu ch·ª©ng tr·∫ßm c·∫£m c·∫ßn ƒë∆∞·ª£c quan t√¢m. N√™n t√¨m ki·∫øm h·ªó tr·ª£ chuy√™n nghi·ªáp ngay.';
                
                case 'GAD_7':
                    if (percentage < 30) return 'M·ª©c ƒë·ªô lo √¢u th·∫•p. B·∫°n ƒëang qu·∫£n l√Ω lo √¢u t·ªët. Ti·∫øp t·ª•c duy tr√¨ th√≥i quen l√†nh m·∫°nh.';
                    if (percentage < 60) return 'Lo √¢u v·ª´a ph·∫£i. Th·ª±c h√†nh k·ªπ thu·∫≠t th·ªü v√† thi·ªÅn ƒë·ªãnh ƒë·ªÉ gi·∫£m lo √¢u.';
                    return 'M·ª©c ƒë·ªô lo √¢u cao. N√™n t√¨m ki·∫øm h·ªó tr·ª£ chuy√™n nghi·ªáp v√† th·ª±c h√†nh c√°c k·ªπ thu·∫≠t qu·∫£n l√Ω lo √¢u.';
                
                case 'ROSENBERG_SELF_ESTEEM':
                    if (percentage > 70) return 'L√≤ng t·ª± tr·ªçng cao! B·∫°n c√≥ c√°i nh√¨n t√≠ch c·ª±c v·ªÅ b·∫£n th√¢n. Ti·∫øp t·ª•c ph√°t tri·ªÉn ƒëi·ªÉm m·∫°nh.';
                    if (percentage > 40) return 'L√≤ng t·ª± tr·ªçng trung b√¨nh. H√£y th·ª±c h√†nh t·ª± khen ng·ª£i v√† t·∫≠p trung v√†o ƒëi·ªÉm m·∫°nh c·ªßa b·∫£n th√¢n.';
                    return 'L√≤ng t·ª± tr·ªçng c·∫ßn ƒë∆∞·ª£c c·∫£i thi·ªán. N√™n t√¨m ki·∫øm h·ªó tr·ª£ ƒë·ªÉ x√¢y d·ª±ng h√¨nh ·∫£nh b·∫£n th√¢n t√≠ch c·ª±c.';
                
                default:
                    return 'K·∫øt qu·∫£ test ƒë√£ ho√†n th√†nh. H√£y tham kh·∫£o AI Companion ƒë·ªÉ c√≥ ph√¢n t√≠ch chi ti·∫øt h∆°n.';
            }
        }

        function testBasicResults() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üìä Basic Test Results:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `${index + 1}. ${test.testType}\n`;
                    result += `   - Score: ${test.totalScore}\n`;
                    result += `   - Level: ${test.evaluation.level}\n`;
                    result += `   - Description: ${test.evaluation.description}\n\n`;
                });
                
                resultDiv.className = 'result info';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testDetailedResults() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üìä Detailed Test Results:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `${index + 1}. ${getTestDisplayName(test.testType)}\n`;
                    result += `   - Score: ${test.totalScore}/${test.maxScore}\n`;
                    result += `   - Percentage: ${((test.totalScore / test.maxScore) * 100).toFixed(1)}%\n`;
                    result += `   - Level: ${test.evaluation.level}\n`;
                    result += `   - Description: ${test.evaluation.description}\n`;
                    result += `   - Answers: ${test.answers?.length || 0} questions\n`;
                    result += `   - Average: ${test.answers?.length ? (test.totalScore / test.answers.length).toFixed(1) : 'N/A'}\n`;
                    result += `   - Completed: ${test.completedAt ? new Date(test.completedAt).toLocaleString('vi-VN') : 'V·ª´a xong'}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testRecommendations() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üí° Test Recommendations:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `${index + 1}. ${getTestDisplayName(test.testType)}\n`;
                    result += `   - Score: ${test.totalScore}/${test.maxScore} (${((test.totalScore / test.maxScore) * 100).toFixed(1)}%)\n`;
                    result += `   - Level: ${test.evaluation.level}\n`;
                    result += `   - Recommendation: ${getRecommendationForTest(test.testType, test.totalScore, test.maxScore)}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testCompleteAnalysis() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üìä Complete Test Analysis:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `üìã ${getTestDisplayName(test.testType)}\n`;
                    result += `   üìà Score: ${test.totalScore}/${test.maxScore} (${((test.totalScore / test.maxScore) * 100).toFixed(1)}%)\n`;
                    result += `   üìä Level: ${test.evaluation.level}\n`;
                    result += `   üìù Questions: ${test.answers?.length || 0}\n`;
                    result += `   üìä Average: ${test.answers?.length ? (test.totalScore / test.answers.length).toFixed(1) : 'N/A'}\n`;
                    result += `   ‚è±Ô∏è Completed: ${test.completedAt ? new Date(test.completedAt).toLocaleString('vi-VN') : 'V·ª´a xong'}\n`;
                    result += `   üí° Recommendation: ${getRecommendationForTest(test.testType, test.totalScore, test.maxScore)}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        // Initialize
        window.onload = function() {
            console.log('üìä Detailed Results Test initialized');
        };
    </script>
</body>
</html>
