<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Ultra Detailed Results</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-button {
            background: #d63384;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #c02a5c;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        .ultra-detailed-result {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-name {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }
        .test-score {
            color: #6c757d;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }
        .test-level {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }
        .test-level.nh·∫π { color: #28a745; }
        .test-level.trung-b√¨nh { color: #ffc107; }
        .test-level.n·∫∑ng { color: #fd7e14; }
        .test-level.r·∫•t-n·∫∑ng { color: #dc3545; }
        .detailed-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #667eea;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .info-row:last-child {
            border-bottom: none;
        }
        .info-label {
            color: #495057;
            font-weight: 600;
            flex: 1;
        }
        .info-value {
            color: #2c3e50;
            font-weight: 600;
            flex: 2;
            text-align: right;
        }
        .recommendation-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #9c27b0;
        }
        .recommendation-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        .recommendation-text {
            color: #495057;
            font-size: 1rem;
            line-height: 1.6;
        }
        .advanced-analysis {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid #17a2b8;
        }
        .analysis-title {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        .analysis-section {
            display: grid;
            gap: 12px;
        }
        .analysis-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border-left: 3px solid #17a2b8;
        }
        .analysis-label {
            color: #495057;
            font-weight: 600;
            font-size: 0.95rem;
        }
        .analysis-value {
            color: #2c3e50;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .severity-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }
        .severity-low { background: #d4edda; color: #155724; }
        .severity-medium { background: #fff3cd; color: #856404; }
        .severity-high { background: #f8d7da; color: #721c24; }
        .severity-critical { background: #f5c6cb; color: #721c24; }
    </style>
</head>
<body>
    <h1>üî¨ Test Ultra Detailed Results</h1>
    <p>Ki·ªÉm tra k·∫øt qu·∫£ test si√™u chi ti·∫øt v·ªõi ph√¢n t√≠ch s√¢u</p>
    
    <div class="test-container">
        <h2>üß™ Ultra Detailed Results Test</h2>
        
        <button class="test-button" onclick="testUltraDetailedResults()">1. Test Ultra Detailed Results</button>
        <button class="test-button" onclick="testAdvancedAnalysis()">2. Test Advanced Analysis</button>
        <button class="test-button" onclick="testSeverityLevels()">3. Test Severity Levels</button>
        <button class="test-button" onclick="testCompleteUltraAnalysis()">4. Test Complete Ultra Analysis</button>
        
        <div id="result" class="result"></div>
    </div>

    <script>
        // Mock test results for testing
        const mockTestResults = [
            {
                testType: 'DASS_21',
                totalScore: 18,
                maxScore: 63,
                evaluation: { level: 'Trung b√¨nh', description: 'M·ª©c ƒë·ªô stress v√† lo √¢u ·ªü m·ª©c trung b√¨nh' },
                answers: [2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1],
                completedAt: new Date().toISOString()
            },
            {
                testType: 'PHQ_9',
                totalScore: 8,
                maxScore: 27,
                evaluation: { level: 'Nh·∫π', description: 'Tri·ªáu ch·ª©ng tr·∫ßm c·∫£m nh·∫π' },
                answers: [2, 2, 1, 2, 1, 2, 1, 2, 1],
                completedAt: new Date().toISOString()
            },
            {
                testType: 'GAD_7',
                totalScore: 12,
                maxScore: 21,
                evaluation: { level: 'Trung b√¨nh', description: 'M·ª©c ƒë·ªô lo √¢u trung b√¨nh' },
                answers: [2, 2, 1, 2, 1, 2, 2],
                completedAt: new Date().toISOString()
            }
        ];

        function getTestDisplayName(testType) {
            const testNames = {
                'DASS_21': 'DASS-21 (Lo √¢u, Tr·∫ßm c·∫£m, Stress)',
                'PHQ_9': 'PHQ-9 (Tr·∫ßm c·∫£m)',
                'GAD_7': 'GAD-7 (Lo √¢u)',
                'ROSENBERG_SELF_ESTEEM': 'Rosenberg Self-Esteem (L√≤ng t·ª± tr·ªçng)',
                'FAMILY_APGAR': 'Family APGAR (H·ªó tr·ª£ gia ƒë√¨nh)',
                'MENOPAUSE_RATING': 'Menopause Rating Scale (M√£n kinh)',
                'PMS': 'PMS (H·ªôi ch·ª©ng ti·ªÅn kinh nguy·ªát)',
                'PARENTAL_STRESS': 'Parental Stress Scale (Stress l√†m cha m·∫π)',
                'FAMILY_RELATIONSHIP': 'Family Relationship Test (M·ªëi quan h·ªá gia ƒë√¨nh)'
            };
            return testNames[testType] || testType;
        }

        function getSeverityLevel(testType, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (percentage < 20) return 'R·∫•t nh·∫π - Kh√¥ng c·∫ßn can thi·ªáp';
                    if (percentage < 40) return 'Nh·∫π - Theo d√µi v√† t·ª± qu·∫£n l√Ω';
                    if (percentage < 60) return 'Trung b√¨nh - C·∫ßn ch√∫ √Ω v√† can thi·ªáp nh·∫π';
                    if (percentage < 80) return 'N·∫∑ng - C·∫ßn can thi·ªáp t√≠ch c·ª±c';
                    return 'R·∫•t n·∫∑ng - C·∫ßn can thi·ªáp chuy√™n nghi·ªáp ngay';
                
                case 'PHQ_9':
                    if (percentage < 25) return 'Kh√¥ng c√≥ tri·ªáu ch·ª©ng';
                    if (percentage < 50) return 'Tr·∫ßm c·∫£m nh·∫π';
                    if (percentage < 75) return 'Tr·∫ßm c·∫£m trung b√¨nh';
                    return 'Tr·∫ßm c·∫£m n·∫∑ng - C·∫ßn h·ªó tr·ª£ chuy√™n nghi·ªáp';
                
                case 'GAD_7':
                    if (percentage < 30) return 'Lo √¢u t·ªëi thi·ªÉu';
                    if (percentage < 50) return 'Lo √¢u nh·∫π';
                    if (percentage < 70) return 'Lo √¢u trung b√¨nh';
                    return 'Lo √¢u n·∫∑ng - C·∫ßn can thi·ªáp chuy√™n nghi·ªáp';
                
                default:
                    return 'C·∫ßn ƒë√°nh gi√° th√™m';
            }
        }

        function getScoreDistribution(answers) {
            if (!answers || answers.length === 0) return 'Kh√¥ng c√≥ d·ªØ li·ªáu';
            
            const distribution = answers.reduce((acc, answer) => {
                acc[answer] = (acc[answer] || 0) + 1;
                return acc;
            }, {});
            
            const total = answers.length;
            const distributionText = Object.entries(distribution)
                .sort(([a], [b]) => parseInt(a) - parseInt(b))
                .map(([score, count]) => `${score}: ${count} (${((count / total) * 100).toFixed(1)}%)`)
                .join(', ');
            
            return distributionText;
        }

        function getTrendAnalysis(answers) {
            if (!answers || answers.length < 3) return 'Kh√¥ng ƒë·ªß d·ªØ li·ªáu ƒë·ªÉ ph√¢n t√≠ch';
            
            const firstHalf = answers.slice(0, Math.floor(answers.length / 2));
            const secondHalf = answers.slice(Math.floor(answers.length / 2));
            
            const firstAvg = firstHalf.reduce((sum, val) => sum + val, 0) / firstHalf.length;
            const secondAvg = secondHalf.reduce((sum, val) => sum + val, 0) / secondHalf.length;
            
            const diff = secondAvg - firstAvg;
            
            if (diff > 0.5) return 'Xu h∆∞·ªõng tƒÉng d·∫ßn - C·∫ßn ch√∫ √Ω';
            if (diff < -0.5) return 'Xu h∆∞·ªõng gi·∫£m d·∫ßn - T√≠ch c·ª±c';
            return 'Xu h∆∞·ªõng ·ªïn ƒë·ªãnh - Duy tr√¨';
        }

        function getWarningLevel(testType, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (percentage > 80) return 'üö® C·∫¢NH B√ÅO CAO - C·∫ßn h·ªó tr·ª£ ngay';
                    if (percentage > 60) return '‚ö†Ô∏è C·∫¢NH B√ÅO - C·∫ßn theo d√µi';
                    if (percentage > 40) return 'üí° CH√ö √ù - C·∫ßn qu·∫£n l√Ω';
                    return '‚úÖ ·ªîN ƒê·ªäNH - Duy tr√¨';
                
                case 'PHQ_9':
                    if (percentage > 70) return 'üö® C·∫¢NH B√ÅO CAO - Tr·∫ßm c·∫£m n·∫∑ng';
                    if (percentage > 50) return '‚ö†Ô∏è C·∫¢NH B√ÅO - Tr·∫ßm c·∫£m trung b√¨nh';
                    if (percentage > 30) return 'üí° CH√ö √ù - Tr·∫ßm c·∫£m nh·∫π';
                    return '‚úÖ ·ªîN ƒê·ªäNH - T√¢m tr·∫°ng t·ªët';
                
                case 'GAD_7':
                    if (percentage > 70) return 'üö® C·∫¢NH B√ÅO CAO - Lo √¢u n·∫∑ng';
                    if (percentage > 50) return '‚ö†Ô∏è C·∫¢NH B√ÅO - Lo √¢u trung b√¨nh';
                    if (percentage > 30) return 'üí° CH√ö √ù - Lo √¢u nh·∫π';
                    return '‚úÖ ·ªîN ƒê·ªäNH - Lo √¢u th·∫•p';
                
                default:
                    return 'üìä C·∫¶N ƒê√ÅNH GI√Å - Xem k·∫øt qu·∫£ chi ti·∫øt';
            }
        }

        function getScoreAnalysis(testType, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (percentage < 20) return 'ƒêi·ªÉm s·ªë th·∫•p - Kh·∫£ nƒÉng qu·∫£n l√Ω stress t·ªët, kh·∫£ nƒÉng th√≠ch ·ª©ng cao';
                    if (percentage < 40) return 'ƒêi·ªÉm s·ªë trung b√¨nh th·∫•p - C√≥ kh·∫£ nƒÉng qu·∫£n l√Ω stress, c·∫ßn duy tr√¨ th√≥i quen l√†nh m·∫°nh';
                    if (percentage < 60) return 'ƒêi·ªÉm s·ªë trung b√¨nh - C·∫ßn ch√∫ √Ω ƒë·∫øn stress, th·ª±c h√†nh k·ªπ thu·∫≠t th∆∞ gi√£n';
                    if (percentage < 80) return 'ƒêi·ªÉm s·ªë cao - Stress ·∫£nh h∆∞·ªüng ƒë√°ng k·ªÉ, c·∫ßn can thi·ªáp t√≠ch c·ª±c';
                    return 'ƒêi·ªÉm s·ªë r·∫•t cao - Stress nghi√™m tr·ªçng, c·∫ßn h·ªó tr·ª£ chuy√™n nghi·ªáp ngay';
                
                case 'PHQ_9':
                    if (percentage < 25) return 'ƒêi·ªÉm s·ªë th·∫•p - T√¢m tr·∫°ng ·ªïn ƒë·ªãnh, kh√¥ng c√≥ d·∫•u hi·ªáu tr·∫ßm c·∫£m';
                    if (percentage < 50) return 'ƒêi·ªÉm s·ªë trung b√¨nh th·∫•p - C√≥ d·∫•u hi·ªáu tr·∫ßm c·∫£m nh·∫π, c·∫ßn theo d√µi';
                    if (percentage < 75) return 'ƒêi·ªÉm s·ªë trung b√¨nh - Tr·∫ßm c·∫£m trung b√¨nh, c·∫ßn can thi·ªáp';
                    return 'ƒêi·ªÉm s·ªë cao - Tr·∫ßm c·∫£m n·∫∑ng, c·∫ßn h·ªó tr·ª£ chuy√™n nghi·ªáp ngay';
                
                case 'GAD_7':
                    if (percentage < 30) return 'ƒêi·ªÉm s·ªë th·∫•p - Lo √¢u t·ªëi thi·ªÉu, kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u t·ªët';
                    if (percentage < 50) return 'ƒêi·ªÉm s·ªë trung b√¨nh th·∫•p - Lo √¢u nh·∫π, c·∫ßn th·ª±c h√†nh k·ªπ thu·∫≠t th∆∞ gi√£n';
                    if (percentage < 70) return 'ƒêi·ªÉm s·ªë trung b√¨nh - Lo √¢u trung b√¨nh, c·∫ßn can thi·ªáp';
                    return 'ƒêi·ªÉm s·ªë cao - Lo √¢u n·∫∑ng, c·∫ßn h·ªó tr·ª£ chuy√™n nghi·ªáp';
                
                default:
                    return 'ƒêi·ªÉm s·ªë c·∫ßn ƒë∆∞·ª£c ƒë√°nh gi√° trong b·ªëi c·∫£nh c·ª• th·ªÉ c·ªßa test';
            }
        }

        function getStrengths(testType, answers) {
            if (!answers || answers.length === 0) return 'Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ ƒë√°nh gi√°';
            
            const lowScores = answers.filter(answer => answer <= 2).length;
            const totalQuestions = answers.length;
            const strengthPercentage = (lowScores / totalQuestions) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (strengthPercentage > 70) return 'Kh·∫£ nƒÉng qu·∫£n l√Ω stress t·ªët, kh·∫£ nƒÉng th√≠ch ·ª©ng cao, t√¢m l√Ω ·ªïn ƒë·ªãnh';
                    if (strengthPercentage > 50) return 'C√≥ kh·∫£ nƒÉng qu·∫£n l√Ω stress, kh·∫£ nƒÉng th√≠ch ·ª©ng trung b√¨nh';
                    return 'C·∫ßn ph√°t tri·ªÉn kh·∫£ nƒÉng qu·∫£n l√Ω stress v√† th√≠ch ·ª©ng';
                
                case 'PHQ_9':
                    if (strengthPercentage > 70) return 'T√¢m tr·∫°ng ·ªïn ƒë·ªãnh, kh·∫£ nƒÉng duy tr√¨ t√¢m l√Ω t√≠ch c·ª±c';
                    if (strengthPercentage > 50) return 'C√≥ kh·∫£ nƒÉng duy tr√¨ t√¢m tr·∫°ng ·ªïn ƒë·ªãnh';
                    return 'C·∫ßn ph√°t tri·ªÉn kh·∫£ nƒÉng duy tr√¨ t√¢m tr·∫°ng t√≠ch c·ª±c';
                
                case 'GAD_7':
                    if (strengthPercentage > 70) return 'Kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u t·ªët, t√¢m l√Ω ·ªïn ƒë·ªãnh';
                    if (strengthPercentage > 50) return 'C√≥ kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u c∆° b·∫£n';
                    return 'C·∫ßn ph√°t tri·ªÉn kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u';
                
                default:
                    return 'C·∫ßn ƒë√°nh gi√° th√™m ƒë·ªÉ x√°c ƒë·ªãnh ƒëi·ªÉm m·∫°nh';
            }
        }

        function getImprovementAreas(testType, answers) {
            if (!answers || answers.length === 0) return 'Kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ ƒë√°nh gi√°';
            
            const highScores = answers.filter(answer => answer >= 3).length;
            const totalQuestions = answers.length;
            const improvementPercentage = (highScores / totalQuestions) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (improvementPercentage > 50) return 'C·∫ßn c·∫£i thi·ªán kh·∫£ nƒÉng qu·∫£n l√Ω stress, th·ª±c h√†nh k·ªπ thu·∫≠t th∆∞ gi√£n, t√¨m ki·∫øm h·ªó tr·ª£';
                    if (improvementPercentage > 30) return 'C·∫ßn ch√∫ √Ω ƒë·∫øn stress, th·ª±c h√†nh k·ªπ thu·∫≠t th·ªü, thi·ªÅn ƒë·ªãnh';
                    return 'Duy tr√¨ th√≥i quen l√†nh m·∫°nh, ti·∫øp t·ª•c ph√°t tri·ªÉn kh·∫£ nƒÉng qu·∫£n l√Ω stress';
                
                case 'PHQ_9':
                    if (improvementPercentage > 50) return 'C·∫ßn c·∫£i thi·ªán t√¢m tr·∫°ng, tƒÉng c∆∞·ªùng ho·∫°t ƒë·ªông t√≠ch c·ª±c, t√¨m ki·∫øm h·ªó tr·ª£ chuy√™n nghi·ªáp';
                    if (improvementPercentage > 30) return 'C·∫ßn ch√∫ √Ω ƒë·∫øn t√¢m tr·∫°ng, tƒÉng c∆∞·ªùng ho·∫°t ƒë·ªông th·ªÉ ch·∫•t, k·∫øt n·ªëi x√£ h·ªôi';
                    return 'Duy tr√¨ t√¢m tr·∫°ng t√≠ch c·ª±c, ti·∫øp t·ª•c ph√°t tri·ªÉn kh·∫£ nƒÉng qu·∫£n l√Ω c·∫£m x√∫c';
                
                case 'GAD_7':
                    if (improvementPercentage > 50) return 'C·∫ßn c·∫£i thi·ªán kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u, th·ª±c h√†nh k·ªπ thu·∫≠t th·ªü, t√¨m ki·∫øm h·ªó tr·ª£';
                    if (improvementPercentage > 30) return 'C·∫ßn ch√∫ √Ω ƒë·∫øn lo √¢u, th·ª±c h√†nh k·ªπ thu·∫≠t th∆∞ gi√£n, thi·ªÅn ƒë·ªãnh';
                    return 'Duy tr√¨ kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u, ti·∫øp t·ª•c ph√°t tri·ªÉn k·ªπ nƒÉng th∆∞ gi√£n';
                
                default:
                    return 'C·∫ßn ƒë√°nh gi√° th√™m ƒë·ªÉ x√°c ƒë·ªãnh lƒ©nh v·ª±c c·∫ßn c·∫£i thi·ªán';
            }
        }

        function getTrendPrediction(testType, score, maxScore) {
            const percentage = (score / maxScore) * 100;
            
            switch (testType) {
                case 'DASS_21':
                    if (percentage < 30) return 'Xu h∆∞·ªõng t√≠ch c·ª±c - Kh·∫£ nƒÉng qu·∫£n l√Ω stress t·ªët, c√≥ th·ªÉ duy tr√¨ ho·∫∑c c·∫£i thi·ªán th√™m';
                    if (percentage < 60) return 'Xu h∆∞·ªõng ·ªïn ƒë·ªãnh - C·∫ßn duy tr√¨ th√≥i quen l√†nh m·∫°nh ƒë·ªÉ tr√°nh tƒÉng stress';
                    return 'Xu h∆∞·ªõng c·∫ßn ch√∫ √Ω - C·∫ßn can thi·ªáp t√≠ch c·ª±c ƒë·ªÉ tr√°nh t√¨nh tr·∫°ng x·∫•u ƒëi';
                
                case 'PHQ_9':
                    if (percentage < 30) return 'Xu h∆∞·ªõng t√≠ch c·ª±c - T√¢m tr·∫°ng ·ªïn ƒë·ªãnh, c√≥ th·ªÉ duy tr√¨ ho·∫∑c c·∫£i thi·ªán th√™m';
                    if (percentage < 60) return 'Xu h∆∞·ªõng ·ªïn ƒë·ªãnh - C·∫ßn duy tr√¨ ho·∫°t ƒë·ªông t√≠ch c·ª±c ƒë·ªÉ tr√°nh tƒÉng tr·∫ßm c·∫£m';
                    return 'Xu h∆∞·ªõng c·∫ßn ch√∫ √Ω - C·∫ßn can thi·ªáp t√≠ch c·ª±c ƒë·ªÉ tr√°nh t√¨nh tr·∫°ng tr·∫ßm c·∫£m n·∫∑ng h∆°n';
                
                case 'GAD_7':
                    if (percentage < 30) return 'Xu h∆∞·ªõng t√≠ch c·ª±c - Kh·∫£ nƒÉng qu·∫£n l√Ω lo √¢u t·ªët, c√≥ th·ªÉ duy tr√¨ ho·∫∑c c·∫£i thi·ªán th√™m';
                    if (percentage < 60) return 'Xu h∆∞·ªõng ·ªïn ƒë·ªãnh - C·∫ßn duy tr√¨ k·ªπ thu·∫≠t th∆∞ gi√£n ƒë·ªÉ tr√°nh tƒÉng lo √¢u';
                    return 'Xu h∆∞·ªõng c·∫ßn ch√∫ √Ω - C·∫ßn can thi·ªáp t√≠ch c·ª±c ƒë·ªÉ tr√°nh t√¨nh tr·∫°ng lo √¢u n·∫∑ng h∆°n';
                
                default:
                    return 'C·∫ßn theo d√µi th√™m ƒë·ªÉ ƒë√°nh gi√° xu h∆∞·ªõng';
            }
        }

        function testUltraDetailedResults() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üî¨ Ultra Detailed Test Results:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `üìã ${getTestDisplayName(test.testType)}\n`;
                    result += `   üìà Score: ${test.totalScore}/${test.maxScore} (${((test.totalScore / test.maxScore) * 100).toFixed(1)}%)\n`;
                    result += `   üìä Level: ${test.evaluation.level}\n`;
                    result += `   üìù Questions: ${test.answers?.length || 0}\n`;
                    result += `   üìä Average: ${test.answers?.length ? (test.totalScore / test.answers.length).toFixed(1) : 'N/A'}\n`;
                    result += `   ‚è±Ô∏è Completed: ${test.completedAt ? new Date(test.completedAt).toLocaleString('vi-VN') : 'V·ª´a xong'}\n`;
                    result += `   üéØ Severity: ${getSeverityLevel(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üìä Distribution: ${getScoreDistribution(test.answers)}\n`;
                    result += `   üîç Trend: ${getTrendAnalysis(test.answers)}\n`;
                    result += `   ‚ö†Ô∏è Warning: ${getWarningLevel(test.testType, test.totalScore, test.maxScore)}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testAdvancedAnalysis() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üî¨ Advanced Analysis:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `üìã ${getTestDisplayName(test.testType)}\n`;
                    result += `   üìä Score Analysis: ${getScoreAnalysis(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üéØ Strengths: ${getStrengths(test.testType, test.answers)}\n`;
                    result += `   ‚ö†Ô∏è Improvement Areas: ${getImprovementAreas(test.testType, test.answers)}\n`;
                    result += `   üìà Trend Prediction: ${getTrendPrediction(test.testType, test.totalScore, test.maxScore)}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testSeverityLevels() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = '‚ö†Ô∏è Severity Levels Analysis:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    const percentage = (test.totalScore / test.maxScore) * 100;
                    let severityClass = 'severity-low';
                    let severityText = 'LOW';
                    
                    if (percentage > 80) {
                        severityClass = 'severity-critical';
                        severityText = 'CRITICAL';
                    } else if (percentage > 60) {
                        severityClass = 'severity-high';
                        severityText = 'HIGH';
                    } else if (percentage > 40) {
                        severityClass = 'severity-medium';
                        severityText = 'MEDIUM';
                    }
                    
                    result += `üìã ${getTestDisplayName(test.testType)}\n`;
                    result += `   üìä Score: ${test.totalScore}/${test.maxScore} (${percentage.toFixed(1)}%)\n`;
                    result += `   üéØ Severity: ${getSeverityLevel(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   ‚ö†Ô∏è Warning: ${getWarningLevel(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üìà Level: ${severityText}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        function testCompleteUltraAnalysis() {
            const resultDiv = document.getElementById('result');
            
            try {
                let result = 'üî¨ Complete Ultra Analysis:\n\n';
                
                mockTestResults.forEach((test, index) => {
                    result += `üìã ${getTestDisplayName(test.testType)}\n`;
                    result += `   üìà Score: ${test.totalScore}/${test.maxScore} (${((test.totalScore / test.maxScore) * 100).toFixed(1)}%)\n`;
                    result += `   üìä Level: ${test.evaluation.level}\n`;
                    result += `   üìù Questions: ${test.answers?.length || 0}\n`;
                    result += `   üìä Average: ${test.answers?.length ? (test.totalScore / test.answers.length).toFixed(1) : 'N/A'}\n`;
                    result += `   ‚è±Ô∏è Completed: ${test.completedAt ? new Date(test.completedAt).toLocaleString('vi-VN') : 'V·ª´a xong'}\n`;
                    result += `   üéØ Severity: ${getSeverityLevel(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üìä Distribution: ${getScoreDistribution(test.answers)}\n`;
                    result += `   üîç Trend: ${getTrendAnalysis(test.answers)}\n`;
                    result += `   ‚ö†Ô∏è Warning: ${getWarningLevel(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üìä Score Analysis: ${getScoreAnalysis(test.testType, test.totalScore, test.maxScore)}\n`;
                    result += `   üéØ Strengths: ${getStrengths(test.testType, test.answers)}\n`;
                    result += `   ‚ö†Ô∏è Improvement Areas: ${getImprovementAreas(test.testType, test.answers)}\n`;
                    result += `   üìà Trend Prediction: ${getTrendPrediction(test.testType, test.totalScore, test.maxScore)}\n\n`;
                });
                
                resultDiv.className = 'result success';
                resultDiv.textContent = result;
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `‚ùå Error: ${error.message}`;
            }
        }

        // Initialize
        window.onload = function() {
            console.log('üî¨ Ultra Detailed Results Test initialized');
        };
    </script>
</body>
</html>
